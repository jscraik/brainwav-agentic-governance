# Anchors should use HTML comments: <!-- PACK:key=value -->; regex only runs as fallback when anchors are missing.
# Update this map when adding governance docs so render/build scripts stay aligned.
# Mapping file used by scripts/governance/build-pack.mjs to extract pack values without brittle parsing.
# Preferred approach: place HTML-style anchors in source docs, e.g. <!-- PACK:limits.stepBudget=7 -->.
# When anchors are absent, fall back to the regex below; keep them tight to avoid false matches.
---
limits:
  stepBudget:
    file: AGENTS.md
    anchor: "PACK:limits.stepBudget"
    regex: "step Budget ≤?\\s*(\\d+)"
  askFirst:
    file: AGENTS.md
    anchor: "PACK:limits.askFirst"
    regex: "Ask-First ≤?\\s*(\\d+)"

evidence:
  tripletRequired:
    file: AGENTS.md
    anchor: "PACK:evidence.tripletRequired"
    default: true
  runManifestRequired:
    file: AGENTS.md
    anchor: "PACK:evidence.runManifestRequired"
    default: true
  requiredTokens:
    file: AGENTS.md
    anchor: "PACK:evidence.requiredTokens"
    default:
      - brand:"brAInwav"
      - trace_id

assurance:
  aegis:
    file: cortex-aegis.md
    anchor: "PACK:assurance.aegis"
  timeFreshness:
    file: .cortex/rules/10-flow/_time-freshness.md
    anchor: "PACK:assurance.timeFreshness"

qualityGates:
  coverage:
    file: constitution.md
    anchor: "PACK:quality.coverage"
  mutation:
    file: constitution.md
    anchor: "PACK:quality.mutation"
  a11y:
    file: constitution.md
    anchor: "PACK:quality.a11y"
  securityScanners:
    file: llm-threat-controls.md
    anchor: "PACK:quality.security"
  supplyChain:
    file: llm-threat-controls.md
    anchor: "PACK:quality.supplyChain"

structure:
  importBoundaries:
    file: structure-guard.json
  snapshotValidation:
    file: export-freeze.snapshot.json

checklists:
  items:
    file: .cortex/rules/20-checklists/checklists.cortex-os.md
  byPhase:
    file: .cortex/rules/20-checklists/checklists.cortex-os.md

workflow:
  phases:
    file: agentic-phase-policy.md
  gates:
    file: agentic-coding-workflow.md
  flows:
    file: agentic-coding-workflow.md
  transitions:
    file: agentic-phase-policy.md

governance:
  precedence:
    file: .cortex/rules/governance-index.json
  hashIndexPath:
    file: .cortex/rules/governance-index.json
  requireHashVerification:
    file: AGENTS.md
    anchor: "PACK:governance.requireHashVerification"
